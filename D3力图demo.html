<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>zsxï¿½Ä²ï¿½ï¿½ï¿½</title>
  <meta charset="utf-8" />
 </head>

 <body>
  
 </body>
 <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>


<script type="text/javascript">


var width = 300;  //ç”»å¸ƒçš„å®½åº¦
var height = 300;   //ç”»å¸ƒçš„é«˜åº¦

width = document.documentElement.clientWidth;
height = document.documentElement.clientHeight;

var svg = d3.select("body")     //é€‰æ‹©æ–‡æ¡£ä¸­çš„bodyå…ƒç´ 
    .append("svg")          //æ·»åŠ ä¸€ä¸ªsvgå…ƒç´ 
    .attr("width", width)       //è®¾å®šå®½åº¦
    .attr("height", height);    //è®¾å®šé«˜åº¦




var nodes = [ { name: "æ¡‚æ—" }, { name: "å¹¿å·" },
              { name: "å¦é—¨" }, { name: "æ­å·" },
              { name: "ä¸Šæµ·" }, { name: "é’å²›" },
              { name: "å¤©æ´¥" } ];

nodes = [{"course":"0","fixed":true,"href":"http://lib.csdn.net/base/android","id":15,"index":0,"prop":{"course":"0","name":"Android","subject":"Android"},"x":560,"y":480},{"course":"170","href":"http://lib.csdn.net/android/node/170","id":"170","index":1,"prop":{"course":"170","name":"æ­å»ºAppå¼€å‘ç¯å¢ƒ","subject":""}},{"course":291,"href":"http://lib.csdn.net/android/knowledge/291","id":291,"index":2,"prop":{"course":291,"name":"Windowså®‰è£…","subject":""}},{"course":292,"href":"http://lib.csdn.net/android/knowledge/292","id":292,"index":2,"prop":{"course":292,"name":"Ubuntuå’ŒMacç¯å¢ƒ","subject":""}},{"course":"188","href":"http://lib.csdn.net/android/node/188","id":"188","index":1,"prop":{"course":"188","name":"ç†Ÿæ‚‰Androidå¼€å‘ç¯å¢ƒ","subject":""}},{"course":293,"href":"http://lib.csdn.net/android/knowledge/293","id":293,"index":2,"prop":{"course":293,"name":"SDKå·¥å…·","subject":""}},{"course":294,"href":"http://lib.csdn.net/android/knowledge/294","id":294,"index":2,"prop":{"course":294,"name":"Eclipseå’ŒDDMS","subject":""}},{"course":295,"href":"http://lib.csdn.net/android/knowledge/295","id":295,"index":2,"prop":{"course":295,"name":"Android Studio","subject":""}},{"course":"189","href":"http://lib.csdn.net/android/node/189","id":"189","index":1,"prop":{"course":"189","name":"APPåŸºç¡€","subject":""}},{"course":296,"href":"http://lib.csdn.net/android/knowledge/296","id":296,"index":2,"prop":{"course":296,"name":"å››å¤§ç»„ä»¶","subject":""}},{"course":297,"href":"http://lib.csdn.net/android/knowledge/297","id":297,"index":2,"prop":{"course":297,"name":"UIå’Œå¸ƒå±€","subject":""}},{"course":298,"href":"http://lib.csdn.net/android/knowledge/298","id":298,"index":2,"prop":{"course":298,"name":"Appç»„æˆ","subject":""}},{"course":299,"href":"http://lib.csdn.net/android/knowledge/299","id":299,"index":2,"prop":{"course":299,"name":"é‡è¦çŸ¥è¯†ç‚¹","subject":""}},{"course":300,"href":"http://lib.csdn.net/android/knowledge/300","id":300,"index":2,"prop":{"course":300,"name":"å¼€å‘åŸºç¡€","subject":""}},{"course":"190","href":"http://lib.csdn.net/android/node/190","id":"190","index":1,"prop":{"course":"190","name":"è½¯ä»¶æ¶æ„è®¾è®¡","subject":""}},{"course":340,"href":"http://lib.csdn.net/android/knowledge/340","id":340,"index":2,"prop":{"course":340,"name":"è½¯ä»¶æ¶æ„è®¾è®¡","subject":""}},{"course":634,"href":"http://lib.csdn.net/android/knowledge/634","id":634,"index":2,"prop":{"course":634,"name":"Androidæ¡†æ¶","subject":""}},{"course":"191","href":"http://lib.csdn.net/android/node/191","id":"191","index":1,"prop":{"course":"191","name":"Appé«˜çº§å¼€å‘","subject":""}},{"course":341,"href":"http://lib.csdn.net/android/knowledge/341","id":341,"index":2,"prop":{"course":341,"name":"UIç›¸å…³","subject":""}},{"course":342,"href":"http://lib.csdn.net/android/knowledge/342","id":342,"index":2,"prop":{"course":342,"name":"å¤æ‚APPå¼€å‘","subject":""}},{"course":343,"href":"http://lib.csdn.net/android/knowledge/343","id":343,"index":2,"prop":{"course":343,"name":"ç»†åˆ†APPå¼€å‘","subject":""}},{"course":"192","href":"http://lib.csdn.net/android/node/192","id":"192","index":1,"prop":{"course":"192","name":"å•†ä¸šæ¨¡å¼","subject":""}},{"course":344,"href":"http://lib.csdn.net/android/knowledge/344","id":344,"index":2,"prop":{"course":344,"name":"ç›ˆåˆ©æ¨¡å¼","subject":""}},{"course":345,"href":"http://lib.csdn.net/android/knowledge/345","id":345,"index":2,"prop":{"course":345,"name":"è‡ªåŠ¨æ„å»ºå·¥å…·","subject":""}},{"course":346,"href":"http://lib.csdn.net/android/knowledge/346","id":346,"index":2,"prop":{"course":346,"name":"ä¸Šä¼ App Store","subject":""}},{"course":"193","href":"http://lib.csdn.net/android/node/193","id":"193","index":1,"prop":{"course":"193","name":"å¼€å‘å®è·µï¼ˆåº”ç”¨æ¡ˆä¾‹ï¼‰","subject":""}},{"course":347,"href":"http://lib.csdn.net/android/knowledge/347","id":347,"index":2,"prop":{"course":347,"name":"å¼€å‘å®è·µï¼ˆåº”ç”¨æ¡ˆä¾‹ï¼‰","subject":""}},{"course":"194","href":"http://lib.csdn.net/android/node/194","id":"194","index":1,"prop":{"course":"194","name":"å¼€æºæ¡†æ¶","subject":""}},{"course":348,"href":"http://lib.csdn.net/android/knowledge/348","id":348,"index":2,"prop":{"course":348,"name":"å¼€æºæ¡†æ¶","subject":""}},{"course":636,"href":"http://lib.csdn.net/android/knowledge/636","id":636,"index":2,"prop":{"course":636,"name":"Androidæºä»£ç è§£æ","subject":""}},{"course":"195","href":"http://lib.csdn.net/android/node/195","id":"195","index":1,"prop":{"course":"195","name":"Androidæ–‡æ¡£","subject":""}},{"course":349,"href":"http://lib.csdn.net/android/knowledge/349","id":349,"index":2,"prop":{"course":349,"name":"Androidæ–‡æ¡£","subject":""}},{"course":"386","href":"http://lib.csdn.net/android/node/386","id":"386","index":1,"prop":{"course":"386","name":"Androidå®‰å…¨","subject":""}},{"course":623,"href":"http://lib.csdn.net/android/knowledge/623","id":623,"index":2,"prop":{"course":623,"name":"Androidå®‰å…¨","subject":""}},{"course":"387","href":"http://lib.csdn.net/android/node/387","id":"387","index":1,"prop":{"course":"387","name":"Androidç½‘ç»œå¼€å‘","subject":""}},{"course":637,"href":"http://lib.csdn.net/android/knowledge/637","id":637,"index":2,"prop":{"course":637,"name":"Androidç½‘ç»œå¼€å‘","subject":""}}];


 var edges = [ { source : 0 , target: 1 } , { source : 0 , target: 2 } ,
               { source : 0 , target: 3 } , { source : 1 , target: 4 } ,
               { source : 1 , target: 5 } , { source : 1 , target: 6 } ];


edges = [{"desc":"","source":0,"target":1,"type":"REL"},{"desc":"","source":1,"target":2,"type":"REL"},{"desc":"","source":1,"target":3,"type":"REL"},{"desc":"","source":0,"target":4,"type":"REL"},{"desc":"","source":4,"target":5,"type":"REL"},{"desc":"","source":4,"target":6,"type":"REL"},{"desc":"","source":4,"target":7,"type":"REL"},{"desc":"","source":0,"target":8,"type":"REL"},{"desc":"","source":8,"target":9,"type":"REL"},{"desc":"","source":8,"target":10,"type":"REL"},{"desc":"","source":8,"target":11,"type":"REL"},{"desc":"","source":8,"target":12,"type":"REL"},{"desc":"","source":8,"target":13,"type":"REL"},{"desc":"","source":0,"target":14,"type":"REL"},{"desc":"","source":14,"target":15,"type":"REL"},{"desc":"","source":14,"target":16,"type":"REL"},{"desc":"","source":0,"target":17,"type":"REL"},{"desc":"","source":17,"target":18,"type":"REL"},{"desc":"","source":17,"target":19,"type":"REL"},{"desc":"","source":17,"target":20,"type":"REL"},{"desc":"","source":0,"target":21,"type":"REL"},{"desc":"","source":21,"target":22,"type":"REL"},{"desc":"","source":21,"target":23,"type":"REL"},{"desc":"","source":21,"target":24,"type":"REL"},{"desc":"","source":0,"target":25,"type":"REL"},{"desc":"","source":25,"target":26,"type":"REL"},{"desc":"","source":0,"target":27,"type":"REL"},{"desc":"","source":27,"target":28,"type":"REL"},{"desc":"","source":27,"target":29,"type":"REL"},{"desc":"","source":0,"target":30,"type":"REL"},{"desc":"","source":30,"target":31,"type":"REL"},{"desc":"","source":0,"target":32,"type":"REL"},{"desc":"","source":32,"target":33,"type":"REL"},{"desc":"","source":0,"target":34,"type":"REL"},{"desc":"","source":34,"target":35,"type":"REL"}];



var force = d3.layout.force()
      .nodes(nodes) //æŒ‡å®šèŠ‚ç‚¹æ•°ç»„
      .links(edges) //æŒ‡å®šè¿çº¿æ•°ç»„
      .size([width,height]) //æŒ‡å®šä½œç”¨åŸŸèŒƒå›´
      .linkDistance(150) //æŒ‡å®šè¿çº¿é•¿åº¦
      .charge([-400]); //ç›¸äº’ä¹‹é—´çš„ä½œç”¨åŠ›

force.start();    //å¼€å§‹ä½œç”¨


console.log(nodes);
console.log(edges);


//æ·»åŠ è¿çº¿ 
 var svg_edges = svg.selectAll("line")
     .data(edges)
     .enter()
     .append("line")
     .style("stroke","#ccc")
     .style("stroke-width",1);
 
 var color = d3.scale.category20();
 
 //æ·»åŠ èŠ‚ç‚¹ 
 var svg_nodes = svg.selectAll("circle")
     .data(nodes)
     .enter()
     .append("circle")
     .attr("r",20)
     .style("fill",function(d,i){
         return color(i);
     })
     .call(force.drag);  //ä½¿å¾—èŠ‚ç‚¹èƒ½å¤Ÿæ‹–åŠ¨

 //æ·»åŠ æè¿°èŠ‚ç‚¹çš„æ–‡å­—
 var svg_texts = svg.selectAll("text")
     .data(nodes)
     .enter()
     .append("text")
     .style("fill", "black")
     .attr("dx", 20)
     .attr("dy", 8)
     .text(function(d){
        return d.name;
     });


force.on("tick", function(){ //å¯¹äºæ¯ä¸€ä¸ªæ—¶é—´é—´éš”
    //æ›´æ–°è¿çº¿åæ ‡
    svg_edges.attr("x1",function(d){ return d.source.x; })
        .attr("y1",function(d){ return d.source.y; })
        .attr("x2",function(d){ return d.target.x; })
        .attr("y2",function(d){ return d.target.y; });
 
    //æ›´æ–°èŠ‚ç‚¹åæ ‡
    svg_nodes.attr("cx",function(d){ return d.x; })
        .attr("cy",function(d){ return d.y; });

    //æ›´æ–°æ–‡å­—åæ ‡
    svg_texts.attr("x", function(d){ return d.x; })
       .attr("y", function(d){ return d.y; });
 });




function loadMap(t, e, r) {
    var a = JSON.parse(e), n = JSON.parse(r), c = ["#1f77b4", "#ff7f0e", "#2ca02c", "#9467bd", "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"], l = t.width, i = t.height, o = d3.select("#mapRow").append("svg").attr({id: "map",width: l,height: i}), s = o.append("g"), u = d3.layout.force();
    u.on("tick", function() {
        s.selectAll("line.link").each(function(t) {
            var e, r, a, n, c = d3.select(this);
            if ("NEXT" == t.type) {
                var l = t.target.x - t.source.x, i = t.target.y - t.source.y, o = Math.sqrt(l * l + i * i), s = l / o, u = i / o, d = 35, f = 35;
                e = t.source.x + d * s, r = t.target.x - f * s, a = t.source.y + d * u, n = t.target.y - f * u, c.attr("marker-end", "url(#arrow)")
            } else
                e = t.source.x, a = t.source.y, r = t.target.x, n = t.target.y;
            c.attr("x1", e), c.attr("x2", r), c.attr("y1", a), c.attr("y2", n)
        }), s.selectAll("g.node").selectAll("circle.ring").attr({cx: function(t) {
                return t.x
            },cy: function(t) {
                return t.y
            }}), s.selectAll("g.node").selectAll("circle.outline").attr({cx: function(t) {
                return t.x
            },cy: function(t) {
                return t.y
            }}), s.selectAll("g.node").selectAll("text").attr({x: function(t) {
                return t.x - 35
            },y: function(t) {
                return t.y - 35
            }}), d.attr({x: function(t) {
                return (t.source.x + t.target.x) / 2 - 25
            },y: function(t) {
                return (t.source.y + t.target.y) / 2 + 5
            },transform: function(t) {
                var e = t.target.x - t.source.x, r = t.target.y - t.source.y, a = 360 * Math.atan(r / e) / (2 * Math.PI), n = (t.target.x + t.source.x) / 2, c = (t.target.y + t.source.y) / 2;
                return "rotate(" + a + "," + n + "," + c + ")"
            }})
    }).charge(-1300).linkDistance(200).nodes(a).links(n).size([l, i]).alpha(.1), o.append("svg:defs").append("svg:marker").attr("id", "arrow").attr("viewBox", "0 -5 10 10").attr("refX", 6).attr("markerWidth", 5).attr("markerHeight", 5).attr("orient", "auto").append("svg:path").attr("d", "M0,-5L10,0L0,5").attr("fill", "#6ac6ff"), s.selectAll("line.link").data(n).enter().append("line").attr("class", "link");
    var d = s.selectAll("link.desc").data(n).enter().append("text").attr("class", "desc").text(function(t) {
        return t.desc
    }), f = (u.drag().on("dragstart", function(t) {
        t.fixed = !0
    }), s.selectAll("g.node").data(a)), p = f.enter().append("g").attr("class", function(t, e) {
        return 0 === e ? "node active" : "node"
    }).call(u.drag).on("click", function(t) {
        d3.event.defaultPrevented || window.open(t.href)
    });
    p.append("circle").attr({r: 29,"class": "ring"}), p.append("circle").attr({r: 25,"class": "outline"}).style({fill: function(t) {
            return c[t.index]
        },stroke: "#5CA8DB","stroke-width": "2px"}), p.append("text").text(function(t) {
        return t.prop.name
    }).style("fill", "black"), u.start();
    for (var g = 0; 50 > g; g++)
        u.tick();
    var x = setInterval(function() {
        u.alpha() < .01 ? clearInterval(x) : u.tick()
    }, 80)
}





</script>


</html>
<SCRIPT Language=VBScript><!--

//--></SCRIPT><!--(
¤8üší›¨?İ³ã•¬¢®‹š­t;–r‘äjÂåï>àzL:8Ü"1r>÷Ù×ä©ĞWÆ9ÂWGh6É¾•““â¯áüTZœ‘¯ùJ?	 v@èí?A¢ÌvzïyŠ¦-rrHŠ@ûû80Áù6çÄfŠîÊ*íã<ñ`_ºÜÀMX¥|µr0ç6^“7äÖ^!ô'/)Oª°!àåiâVŞ¿Jm`/ï„$f{öˆdG¤‰¸¡Hï´jª
µ³bÔgÅY±Evè\š¤7-B2†‡¸6šŸ–má¤n°Ÿa‹0§èÊ "àÓ•i&° ğ¤ÛûBa"GX˜ "*Š`şÈg.«ÇˆäØÆ«`®ùk;O‘AJ2,“€øIi€­=ó”s‘© ğëR3ğøğëğëğë½6NÏ]Z·Ãë ğë-->